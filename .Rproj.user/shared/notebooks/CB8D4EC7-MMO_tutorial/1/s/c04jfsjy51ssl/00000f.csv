"0","raleigh_data <- raleigh_data_norm %>%"
"0","  # pick out just syllables with primary stress"
"0","  filter(syllable_stress==1) %>%"
"0","  # grab the /ɪ/ and /ɛ/ tokens."
"0","  # match the unisyn label to the phone label for a quality check"
"0","  filter((phone_label==""EH1"" & UnisynPrimStressedVowel1==""e"") | "
"0","           (phone_label==""IH1"" & UnisynPrimStressedVowel1==""i"")) %>%"
"0","  # make sure that UR in this dialect corresponds to lexical set "
"0","  # (more important when there is more than one dialect)"
"0","  filter(unisynPrimStressedVowel2_sca==UnisynPrimStressedVowel1) %>%"
"0","  # label the context according to following consonant"
"0","  mutate(context = case_when("
"0","    following_phone %in% c(""B"", ""CH"", ""D"", ""DH"", ""F"", ""G"", ""HH"", ""JH"", ""K"","
"0","                           ""L"", ""P"", ""R"", ""S"", ""SH"", ""T"", ""TH"", ""V"", ""W"","
"0","                           ""Y"", ""Z"", ""ZH"" ) ~ ""oral"", # oral consonants"
"0","    following_phone %in% c(""N"", ""M"", ""NG"") ~ ""nasal"", # nasal consonants"
"0","    TRUE ~ ""other"")) %>% "
"0","  # get rid of everything that isn't an oral or nasal consonant"
"0","  filter(context != ""other"") %>% "
"0","  # get rid of voiced prevalar contexts (can include, but would want "
"0","  # following consonant included in model as a predictor or random effect)"
"0","  filter(following_phone!=""NG"", following_phone!=""G"") %>%"
"0","  # make vowel and context factors and make sure that there aren't "
"0","  # extraneous levels"
"0","  mutate(vowel = factor(UnisynPrimStressedVowel1,"
"0","                        levels=c('i', 'e')),"
"0","         context = factor(context,"
"0","                          levels=c('oral', 'nasal'))) %>%"
"0","  droplevels() %>%"
"0","  # keep just the columns we're interested in"
"0","  dplyr::select(speaker, vowel, context, word, F1, F2)"
